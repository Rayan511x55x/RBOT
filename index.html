<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rocket League MMR Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: white;
            color: #333;
            text-align: center;
            padding: 20px;
        }
        .rank {
            font-size: 1.5em;
            margin: 10px 0;
        }
        .rank img {
            vertical-align: middle;
            margin-right: 10px;
        }
        .loading {
            font-size: 1.2em;
            color: #888;
        }
    </style>
</head>
<body>
    <h1>Rocket League MMR Tracker for mk_cio</h1>
    <div id="loading" class="loading">Loading MMR...</div>
    <div id="mmr-container">
        <div class="rank" id="rank-1v1"></div>
        <div class="rank" id="rank-2v2"></div>
        <div class="rank" id="rank-3v3"></div>
        <div class="rank" id="rank-tournament"></div>
    </div>

    <script>
        const CORS_PROXY = "https://cors-anywhere.herokuapp.com/";
        const API_URL = "https://api.tracker.gg/api/v2/rocket-league/standard/profile/epic/mk_cio";
        const API_KEY = "6c469271-5b34-40cb-9992-82012cc117f0";

        async function fetchMMR() {
            try {
                const response = await fetch(CORS_PROXY + API_URL, {
                    headers: {
                        "TRN-Api-Key": API_KEY,
                    },
                });

                if (!response.ok) {
                    throw new Error("Failed to fetch MMR");
                }

                const data = await response.json();
                const mmrData = data.data.segments;

                document.getElementById("loading").style.display = "none";
                displayRank("1v1", mmrData[0]);
                displayRank("2v2", mmrData[1]);
                displayRank("3v3", mmrData[2]);
                displayRank("tournament", mmrData[4]);
            } catch (error) {
                console.error("Failed to fetch MMR:", error);
                document.getElementById("loading").innerText = "Failed to load MMR data.";
            }
        }

        function displayRank(playlistName, rankData) {
            const rankElement = document.getElementById(`rank-${playlistName.toLowerCase()}`);
            const rank = rankData.stats.peakRating;

            const rankName = rank.metadata.name;
            const rankValue = rank.value;
            const rankIcon = rank.metadata.iconUrl;

            rankElement.innerHTML = `
                <img src="${rankIcon}" alt="${rankName}" width="30" height="30">
                ${playlistName}: ${rankName} ${rankValue}
            `;
        }

        fetchMMR();
    </script>
</body>
</html>
